<template>
  <div class="map-application">
    <div class="map-header">
      <div class="header-left">
        <h1>地图导航</h1>
      </div>
      <div class="header-right">
        <CloseButton @click="closethePage" />
      </div>
    </div>

    <div class="map-main-content">
      <div class="map-wrapper">
        <div class="map-container">
          <MapComponent ref="mapComponent" :center="mapCenter" :zoom="mapZoom" @marker-clicked="handleMarkerClick" />

          <div class="map-buttons">
            <button @click="addMarker" class="map-btn add-marker">
              <svg t="1749430716375" class="map-icon" viewBox="0 0 1024 1024" version="1.1"
                xmlns="http://www.w3.org/2000/svg" p-id="6653" width="256" height="256">
                <path
                  d="M911.4 512.1c0-220.5-179.4-400-400-400-19 0-37.8 1.3-56.1 3.9-159.6 60.7-273.1 215.1-273.1 396s113.5 335.4 273.1 396.1c18.4 2.6 37.2 3.9 56.1 3.9 220.5 0.1 400-179.3 400-399.9z"
                  fill="#91B4FF" p-id="6654"></path>
                <path
                  d="M185.1 805.4c-6.8 0-13.5-2.9-18.2-8.6a444.03 444.03 0 0 1-37.2-52.1c-6.8-11.1-3.3-25.6 7.9-32.4 11.1-6.8 25.6-3.3 32.4 7.9 9.9 16.3 21.1 31.9 33.2 46.6 8.3 10 6.9 24.9-3.1 33.2-4.4 3.7-9.8 5.4-15 5.4z"
                  fill="#3778FF" p-id="6655"></path>
                <path
                  d="M511.6 959.3c-92.9 0-182-28.2-257.7-81.7-10.6-7.5-13.2-22.2-5.7-32.9 7.5-10.7 22.2-13.2 32.9-5.7 67.7 47.8 147.3 73 230.5 73 220.5 0 400-179.4 400-400s-179.4-400-400-400-400 179.4-400 400c0 38.3 5.4 76.1 16 112.5 3.7 12.5-3.5 25.6-16 29.3-12.5 3.7-25.6-3.5-29.3-16-11.9-40.7-17.9-83-17.9-125.7C64.5 265.6 265.1 65 511.6 65s447.2 200.6 447.2 447.2-200.6 447.1-447.2 447.1z"
                  fill="#3778FF" p-id="6656"></path>
                <path
                  d="M512.6 726.9c-13 0-23.6-10.6-23.6-23.6V321c0-13 10.6-23.6 23.6-23.6 13 0 23.6 10.6 23.6 23.6v382.3c0 13-10.6 23.6-23.6 23.6z"
                  fill="#3778FF" p-id="6657"></path>
                <path
                  d="M702.5 536.9H320.3c-13 0-23.6-10.6-23.6-23.6 0-13 10.6-23.6 23.6-23.6h382.3c13 0 23.6 10.6 23.6 23.6-0.1 13-10.6 23.6-23.7 23.6z"
                  fill="#3778FF" p-id="6658"></path>
              </svg>
              <span>添加标记</span>
            </button>
            <button @click="removeLastMarker" class="map-btn remove-marker">
              <svg t="1749430761140" class="map-icon" viewBox="0 0 1024 1024" version="1.1"
                xmlns="http://www.w3.org/2000/svg" p-id="7651" width="256" height="256">
                <path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#F5222D" p-id="7652"></path>
                <path
                  d="M471.338667 666.709333V423.594667a25.642667 25.642667 0 0 0-51.285334 0v243.114666a25.642667 25.642667 0 0 0 51.285334 0z m239.658666-268.16a25.642667 25.642667 0 0 0-25.6 25.6v330.965334c0 10.24-8.362667 18.56-18.602666 18.56H357.333333a18.56 18.56 0 0 1-18.56-18.56V423.253333a25.685333 25.685333 0 0 0-51.285333 0v331.861334c0 38.528 31.317333 69.845333 69.845333 69.845333h309.461334c38.528 0 69.845333-31.317333 69.845333-69.845333V424.149333c0-14.122667-11.52-25.6-25.6-25.6z m-107.050666 268.16V423.594667a25.642667 25.642667 0 0 0-51.285334 0v243.114666a25.642667 25.642667 0 0 0 51.285334 0z m195.413333-357.12h-106.965333v-40.704c0-38.528-31.146667-69.845333-69.376-69.845333H401.493333c-38.528 0-69.845333 31.317333-69.845333 69.845333v40.661334H224.682667a25.642667 25.642667 0 0 0 0 51.285333h574.677333a25.685333 25.685333 0 0 0 0-51.285333z m-158.293333 0h-258.133334v-40.704c0-10.24 8.32-18.602667 18.56-18.602666h221.525334c10.112 0 18.048 8.149333 18.048 18.602666v40.661334z"
                  fill="#FFFFFF" p-id="7653"></path>
              </svg>
              <span>删除标记</span>
            </button>
            <button @click="resetMap" class="map-btn reset-map">
              <svg t="1749430800956" class="map-icon" viewBox="0 0 1024 1024" version="1.1"
                xmlns="http://www.w3.org/2000/svg" p-id="9506" width="256" height="256">
                <path
                  d="M512 0a512 512 0 1 0 0 1024A512 512 0 0 0 512 0z m6.72 320.192a191.808 191.808 0 1 0 179.2 260.224 38.4 38.4 0 0 1 71.68 27.392 268.544 268.544 0 1 1-91.52-311.936l42.368-52.352 53.248 170.88-178.24-16.576 34.24-42.24a190.912 190.912 0 0 0-110.976-35.392z"
                  fill="#00C8C0" p-id="9507"></path>
              </svg>
              <span>重置地图</span>
            </button>
            <button @click="locateMe" class="map-btn locate-me">
              <svg t="1749430919483" class="map-icon" viewBox="0 0 1024 1024" version="1.1"
                xmlns="http://www.w3.org/2000/svg" p-id="23281" width="256" height="256">
                <path
                  d="M595.3229748836427 822.7986927655744l-107.89213246958286-271.72833209506445-307.6923734939325 31.96803542016398 479.52058507682204-315.6843854513405-63.93607911330681 555.4446821262412zM503.41486219238703 39.58173190054356c-263.73632427414594 0-479.52058507682204 215.78426493916572-479.52058507682204 479.52058921331167s215.78426493916572 479.52058507682204 479.52058507682204 479.52058507682204 479.52058507682204-215.78426493916572 479.52058921331167-479.52058507682204-215.78426493916572-479.52058507682204-479.52058921331167-479.52058921331167z"
                  fill="#2cd105" p-id="23282"></path>
              </svg>
              <span>我的位置</span>
            </button>
            <button @click="showTransportModal = true" class="map-btn route-planning" :disabled="markers.length < 2">
              <svg t="1749431036427" class="map-icon" viewBox="0 0 1126 1024" version="1.1"
                xmlns="http://www.w3.org/2000/svg" p-id="27769" width="256" height="256">
                <path
                  d="M332.9024 555.4176c-82.8416 0-146.6368 54.8864-146.6368 117.76 0 62.7712 63.7952 117.76 146.6368 117.76l430.592-0.1024v-92.16l215.04 153.6-215.04 153.6v-92.16H332.9024c-141.1072 0-259.6864-97.28-268.9024-224.5632l-0.6144-15.9744c0-135.168 122.5728-240.64 269.5168-240.64h392.3968c83.0464 0 147.0464-54.9888 147.0464-117.76 0-62.8736-64-117.76-147.0464-117.76H296.448a120.832 120.832 0 0 1-107.3152 61.44c-69.632 0-122.88-53.248-122.88-122.88 0-69.632 53.248-122.88 122.88-122.88 47.0016 0 86.4256 24.1664 107.2128 61.2352l428.9536 0.2048c147.1488 0 269.9264 105.472 269.9264 240.64s-122.7776 240.64-269.9264 240.64H332.8z"
                  fill="#1296db" p-id="27770"></path>
              </svg>
              <span>路线规划</span>
            </button>
          </div>
        </div>
      </div>

      <div class="info-panel">
        <div class="search-panel">
          <div class="search-box">
            <input type="text" v-model="searchQuery" placeholder="搜索地点..." @keyup.enter="handleSearch">
            <button @click="handleSearch" class="search-btn">
              <span>搜索地点</span>
            </button>
          </div>
        </div>
        <div class="info-header">
          <h2>地图信息</h2>
        </div>

        <div class="markers-list">
          <template v-if="markers.length > 0">
            <div v-for="(marker, index) in markers" :key="index" class="marker-item" @click="centerMapOnMarker(marker)">
              <span class="marker-index">{{ index + 1 }}</span>
              <span class="marker-name">{{ marker.name || `标记点 ${index + 1}` }}</span>
              <span class="marker-coords">
                ({{ marker.lat.toFixed(4) }}, {{ marker.lng.toFixed(4) }})
              </span>
              <button @click.stop="removeMarker(index)" class="marker-remove-btn">
                <svg t="1749430761140" class="icon" viewBox="0 0 1024 1024" version="1.1"
                  xmlns="http://www.w3.org/2000/svg" p-id="7651" width="256" height="256">
                  <path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#F5222D" p-id="7652">
                  </path>
                  <path
                    d="M471.338667 666.709333V423.594667a25.642667 25.642667 0 0 0-51.285334 0v243.114666a25.642667 25.642667 0 0 0 51.285334 0z m239.658666-268.16a25.642667 25.642667 0 0 0-25.6 25.6v330.965334c0 10.24-8.362667 18.56-18.602666 18.56H357.333333a18.56 18.56 0 0 1-18.56-18.56V423.253333a25.685333 25.685333 0 0 0-51.285333 0v331.861334c0 38.528 31.317333 69.845333 69.845333 69.845333h309.461334c38.528 0 69.845333-31.317333 69.845333-69.845333V424.149333c0-14.122667-11.52-25.6-25.6-25.6z m-107.050666 268.16V423.594667a25.642667 25.642667 0 0 0-51.285334 0v243.114666a25.642667 25.642667 0 0 0 51.285334 0z m195.413333-357.12h-106.965333v-40.704c0-38.528-31.146667-69.845333-69.376-69.845333H401.493333c-38.528 0-69.845333 31.317333-69.845333 69.845333v40.661334H224.682667a25.642667 25.642667 0 0 0 0 51.285333h574.677333a25.685333 25.685333 0 0 0 0-51.285333z m-158.293333 0h-258.133334v-40.704c0-10.24 8.32-18.602667 18.56-18.602666h221.525334c10.112 0 18.048 8.149333 18.048 18.602666v40.661334z"
                    fill="#FFFFFF" p-id="7653"></path>
                </svg>
              </button>
            </div>
          </template>
          <div v-else class="no-markers">
            <svg t="1749431196183" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
              p-id="30205" width="256" height="256">
              <path
                d="M970.24 258.944v499.456c0 13.696-1.28 27.136-3.84 40.064l-1.536 6.912c-0.512 2.304-1.024 4.352-1.792 6.656-14.72 54.784-52.096 100.736-100.992 126.976-2.048 1.28-4.096 2.304-6.4 3.328-2.048 1.28-4.352 2.304-6.656 3.328-25.6 11.392-54.144 18.048-84.096 18.048h-499.2c-11.136 0-22.4-1.024-33.024-2.56-2.048-0.512-4.352-0.768-6.4-1.28s-4.352-0.768-6.4-1.536c-91.136-20.608-159.488-102.272-159.488-199.808V258.944c0-26.88 5.376-52.864 14.72-76.416 0.768-2.048 1.792-4.096 2.816-5.888 0.768-2.048 1.536-4.096 2.56-6.144C107.264 114.688 158.208 72.832 219.904 58.88c2.048-0.512 4.352-1.024 6.4-1.28 2.048-0.512 4.352-0.768 6.4-1.28 10.368-1.536 20.864-2.56 31.744-2.56h500.736C878.336 53.76 970.24 145.664 970.24 258.944z"
                fill="#8ED980" p-id="30206"></path>
              <path
                d="M964.864 805.248c-0.512 2.304-1.024 4.352-1.792 6.656-14.72 54.784-52.096 100.736-100.992 126.976-2.048 1.28-4.096 2.304-6.4 3.328l-88.576-62.72-27.904-19.84-10.368-7.424-12.16-8.576-83.84-59.392-11.392-7.808s-0.256 0-0.256-0.256L611.84 769.28l-20.48-14.464-146.944-104.064-32-22.656-12.672-9.088-42.368-29.952-45.696-32.512-16.512-11.648-30.72-21.888-31.744-22.4-12.672-9.088-10.368-7.424-149.12-105.6v-119.552c0-26.88 5.376-52.864 14.72-76.416 0.768-2.048 1.792-4.096 2.816-5.888l141.952 100.608 12.672 9.088 31.744 22.4 103.04 73.088 32.256 22.912 12.672 9.088 308.992 218.88 18.048 12.672 5.888 4.352 6.4 4.352 56.832 40.32 17.792 12.672 53.12 37.632 5.888 4.352 5.888 3.84v0.256l13.184 9.344 60.416 42.752z"
                fill="#FFD34A" p-id="30207"></path>
              <path
                d="M406.016 53.76v909.696H265.728c-11.136 0-22.4-1.024-33.024-2.56-2.048-0.512-4.352-0.768-6.4-1.28V57.6c2.048-0.512 4.352-0.768 6.4-1.28 10.368-1.536 20.864-2.56 31.744-2.56h141.568z"
                fill="#FFFFFF" p-id="30208"></path>
              <path d="M264.448 53.76h103.04v502.784h-103.04z" fill="#008DDA" p-id="30209"></path>
              <path
                d="M667.904 53.76h-161.28C509.44 311.936 714.368 522.752 970.24 534.656V373.12C803.2 361.472 670.336 223.104 667.904 53.76z"
                fill="#FFFFFF" p-id="30210"></path>
              <path
                d="M674.176 53.76h-12.672c2.56 172.928 138.112 314.112 308.736 325.76v-12.672C806.528 355.2 676.736 219.776 674.176 53.76z m0 0h-12.672c2.56 172.928 138.112 314.112 308.736 325.76v-12.672C806.528 355.2 676.736 219.776 674.176 53.76z m0 0h-12.672c2.56 172.928 138.112 314.112 308.736 325.76v-12.672C806.528 355.2 676.736 219.776 674.176 53.76z m-161.152 0H500.48c2.56 261.76 210.176 475.264 469.76 487.04v-12.416C717.824 516.096 515.712 308.48 513.024 53.76z"
                fill="#80C073" p-id="30211"></path>
              <path
                d="M441.344 656.256L593.92 764.416l22.4 16 11.392 7.808 0.256 0.256 16 11.392 53.376 37.888h0.256l16.512 11.648s0 0.256 0.256 0.256l11.904 8.576 29.952 21.888h0.768l92.16 65.28c2.304-1.024 4.608-2.048 6.656-3.328 2.304-1.024 4.352-2.048 6.4-3.328l-86.016-60.928-25.344-17.664-8.832-6.656c-0.256 0-0.256 0-0.512-0.256l-10.112-6.912-68.352-48.384-4.096-3.072-32.768-23.04-9.344-6.656-8.32-5.888-18.816-13.44-142.464-100.992c-1.92 3.84-3.84 7.68-5.888 11.392zM213.888 479.616L60.544 370.944v15.488l144.64 102.528c2.816-3.2 5.632-6.4 8.704-9.344zM80.512 170.496c-1.024 2.048-1.792 4.096-2.56 6.144-1.024 1.792-2.048 3.84-2.816 5.888l144.768 102.528v-15.488L80.512 170.496zM905.984 755.84l-13.952-9.856-5.632-4.096-5.888-4.096-43.136-30.72-9.088-6.4-8.832-6.4-44.928-31.744v-0.256l-20.864-14.464c-0.256-0.256-0.512-0.256-0.768-0.512L746.24 642.56l-17.28-12.16-316.544-224.512v15.488l300.928 213.248 19.072 13.44 6.144 4.608 6.144 4.096 52.864 37.632 8.832 6.4 9.088 6.4 62.72 44.672 5.632 3.84 5.632 3.84 13.184 9.344 60.672 43.136c0.768-2.304 1.28-4.352 1.792-6.656l1.536-6.912-60.672-42.624z"
                fill="#FFA934" p-id="30212"></path>
              <path
                d="M219.904 958.208c2.048 0.768 4.352 1.024 6.4 1.536 2.048 0.512 4.352 0.768 6.4 1.28V701.824c-4.48-3.072-8.704-6.528-12.672-10.112v266.496z"
                fill="#FFB0BD" p-id="30213"></path>
              <path
                d="M232.704 278.4V56.32c-2.048 0.512-4.352 0.768-6.4 1.28-2.048 0.256-4.352 0.768-6.4 1.28v210.688l6.4 4.352 6.4 4.48z"
                fill="#C5C3BD" p-id="30214"></path>
              <path d="M232.704 293.888l-6.4-4.352-6.4-4.608v188.928c4.096-3.584 8.32-6.912 12.672-10.112V293.888z"
                fill="#EAC243" p-id="30215"></path>
              <path d="M412.416 53.76h-12.672v343.04l12.672 9.088z" fill="#80C073" p-id="30216"></path>
              <path d="M399.744 963.456h12.672V691.328c-4.096 3.584-8.32 7.04-12.672 10.112v262.016z" fill="#C5C3BD"
                p-id="30217">
              </path>
              <path d="M399.744 412.544v51.84c4.48 3.2 8.704 6.528 12.672 10.112v-53.12l-6.4-4.352-6.272-4.48z"
                fill="#EAC243" p-id="30218"></path>
              <path
                d="M399.744 396.8v15.744l6.272 4.608 6.4 4.224v-15.488zM232.704 293.888v-15.488l-6.4-4.48-6.4-4.352v15.488l6.4 4.608z"
                fill="#EE9B30" p-id="30219"></path>
              <path
                d="M447.232 644.864c8.832-18.816 13.952-39.68 13.952-61.952 0-43.136-18.944-81.792-48.768-108.416v145.664l34.816 24.704zM205.184 488.96c-21.504 25.344-34.56 58.112-34.56 93.952 0 43.392 19.2 82.304 49.28 108.928V499.328l-14.72-10.368zM232.704 464v29.056l31.744 22.4 33.024 23.296 24.832 17.792 31.488 22.4h0.256l45.696 32.512V464.384c-23.68-16.768-52.608-26.752-83.84-26.752-30.976 0-59.648 9.856-83.2 26.368zM360.832 599.424l-60.416-42.88-7.68-5.376-28.416-20.352-31.744-22.4v193.408c23.552 16.512 52.224 26.368 83.328 26.368 31.232 0 60.16-9.984 83.84-26.752v-74.624l-38.912-27.392zM219.904 474.112c-2.048 1.792-4.096 3.584-6.016 5.504l6.016 4.352v-9.856zM412.416 691.328c11.392-10.112 21.12-21.888 28.8-35.2l-28.8-20.48v55.68z"
                fill="#0078D3" p-id="30220"></path>
              <path
                d="M357.376 588.928l-45.696-32.384-16.512-11.776-30.72-21.76-31.744-22.4v7.936l31.744 22.272 28.416 20.352 7.552 5.376 60.416 42.88 38.912 27.392v-7.936z"
                fill="#0078D3" p-id="30221"></path>
              <path
                d="M353.792 578.816l-31.488-22.272-24.96-17.792-32.896-23.424-31.744-22.272v7.552l31.744 22.4 30.72 21.76 16.512 11.776 45.696 32.384 42.368 29.952v-7.552l-45.696-32.512zM219.904 483.84l-6.016-4.352c-3.072 2.944-5.888 6.144-8.704 9.344l14.72 10.368v-15.36zM412.416 635.648l28.8 20.48c2.176-3.712 4.096-7.424 6.016-11.392l-34.816-24.576v15.488zM219.904 499.328v192.512c4.096 3.584 8.32 6.912 12.672 10.112V508.544l-12.672-9.216zM406.016 631.424l-6.4-4.608V701.44c4.48-3.2 8.704-6.528 12.672-10.112v-55.68l-6.272-4.224z"
                fill="#0078D3" p-id="30222"></path>
              <path
                d="M399.744 611.328l6.4 4.608 6.4 4.352V474.496c-4.096-3.584-8.32-7.04-12.672-10.112v146.944zM232.704 493.056v-29.056c-4.48 3.072-8.704 6.528-12.672 10.112v9.856l12.672 9.088z"
                fill="#0078D3" p-id="30223"></path>
              <path
                d="M232.704 493.056l-12.8-9.216v15.488l12.8 9.216v-7.936zM399.744 626.816l6.272 4.608 6.4 4.224v-15.488l-6.4-4.224-6.272-4.608v7.552zM910.592 718.848c0 89.344-72.32 161.792-161.792 161.792-89.344 0-161.792-72.32-161.792-161.792 0-33.792 10.368-65.28 28.16-91.392 18.816 7.808 39.04 11.904 60.672 11.904 27.648 0 53.632-6.912 76.16-19.328 22.656 12.416 48.512 19.328 76.16 19.328 19.584 0 38.144-3.584 55.296-9.856 17.152 25.6 27.136 56.32 27.136 89.344z"
                fill="#0078D3" p-id="30224"></path>
              <path
                d="M887.552 725.376c0 70.912-62.08 128.384-138.752 128.384-76.672 0-138.752-57.472-138.752-128.384 0-26.88 8.96-51.84 24.192-72.576 16.128 6.272 33.536 9.472 52.096 9.472 23.808 0 45.952-5.504 65.408-15.36 19.456 9.856 41.6 15.36 65.408 15.36 16.768 0 32.64-2.816 47.488-7.808 14.464 20.224 22.912 44.672 22.912 70.912z"
                fill="#0078D3" p-id="30225"></path>
              <path
                d="M892.8 707.072l-1.536-7.68v-0.256c-1.536-7.68-3.84-14.976-6.912-22.144-0.256-0.256-0.256-0.768-0.512-1.024l-2.304-5.376c-3.328-7.168-7.424-13.696-11.904-20.352l-2.816-3.584-4.352 1.536c-7.424 2.56-14.976 4.352-22.656 5.632-7.424 1.024-15.232 1.792-23.168 1.792-22.656 0-43.392-4.864-62.208-14.464l-2.816-1.536-2.816 1.664c-0.768 0.512-1.536 0.768-2.56 1.28-2.304 1.024-4.608 2.048-6.912 2.816-2.304 1.28-4.608 2.048-7.168 2.816-14.464 5.12-29.952 7.68-46.208 7.68-17.28 0-34.048-3.072-49.792-8.832l-4.352-1.792-3.072 3.84c-2.56 3.328-4.608 6.912-6.656 10.112-1.28 2.048-2.56 4.096-3.584 6.144-0.512 1.024-1.024 2.048-1.28 2.816-1.536 2.56-2.816 5.376-3.84 8.064-2.56 5.632-4.608 11.648-5.888 17.536-0.768 2.048-1.024 3.84-1.536 5.888v0.768l-1.536 6.4v0.512c-0.768 6.144-1.28 12.16-1.28 18.304 0 11.648 1.536 23.168 4.864 34.048 0.768 3.328 1.792 6.656 3.328 9.856 1.28 3.84 2.816 7.68 4.608 11.136 19.84 40.832 60.928 70.784 109.952 77.952 4.352 0.768 8.32 1.28 12.928 1.28 3.072 0.512 6.4 0.512 9.6 0.512h2.048c66.56-0.768 122.368-43.392 138.368-100.736 0.768-2.048 1.28-4.096 1.792-6.4v-0.256c0.512-2.304 1.024-4.608 1.024-6.912 1.536-6.656 2.048-13.44 2.048-20.608 0.384-6.272-0.128-12.416-0.896-18.432zM879.36 744.576c0 2.56-0.512 4.864-1.28 7.168-12.928 54.528-66.048 95.744-129.28 95.744-6.144 0-11.904-0.256-17.536-1.024-5.12-0.768-9.856-1.536-14.72-2.816-6.656-1.28-12.928-3.328-19.072-5.888h-0.256c-21.12-8.064-39.296-21.376-53.376-37.888-4.096-4.864-7.808-10.112-11.136-15.744-2.56-3.84-4.608-8.064-6.656-12.416-6.4-14.208-9.856-29.952-9.856-46.464 0-6.144 0.512-12.16 1.536-18.304 0.256-2.048 0.768-4.096 1.28-6.4 0.512-2.048 1.024-4.352 1.536-6.4 0.512-1.536 1.024-3.328 1.536-4.864 0.512-2.048 1.28-4.096 2.304-6.144 2.048-5.12 4.352-10.112 7.168-14.976 1.536-2.816 3.328-5.376 5.12-8.064 15.744 5.376 32.512 8.064 49.536 8.064 20.864 0 40.32-3.84 58.368-11.648 2.304-0.512 4.864-1.792 7.168-2.816 7.424 3.584 14.976 6.4 22.912 8.32v0.256c13.44 3.84 27.648 5.888 42.368 5.888 4.352 0 8.32-0.256 12.672-0.512 10.88-0.768 21.888-2.816 32.512-6.144 6.144 9.344 11.136 19.584 14.208 30.464 0.256 0.512 0.512 1.28 0.512 2.048 0.768 2.048 1.28 4.096 1.792 6.4 0.512 2.048 1.024 4.096 1.28 6.4 1.024 6.144 1.536 12.16 1.536 18.304 0 4.352-0.256 8.32-0.768 12.416-0.384 2.56-0.64 4.864-1.408 7.04z"
                fill="#EEEAE5" p-id="30226"></path>
              <path
                d="M884.992 700.672H612.608c3.584-17.536 11.136-33.792 21.632-48 16 6.144 33.536 9.344 52.096 9.344 23.808 0 45.952-5.376 65.536-15.232 19.328 9.856 41.344 15.232 65.28 15.232 16.768 0 32.768-2.816 47.488-7.808 9.728 13.696 16.896 29.44 20.352 46.464z"
                fill="#FFFFFF" p-id="30227"></path>
              <path
                d="M884.992 700.672H612.608c3.584-17.536 11.136-33.792 21.632-48 16 6.144 33.536 9.344 52.096 9.344 23.808 0 45.952-5.376 65.536-15.232 19.328 9.856 41.344 15.232 65.28 15.232 16.768 0 32.768-2.816 47.488-7.808 9.728 13.696 16.896 29.44 20.352 46.464z"
                fill="#E7322C" p-id="30228"></path>
              <path
                d="M891.264 699.392v-0.256c-1.792-7.68-4.096-14.976-6.912-22.144-0.256-0.256-0.256-0.768-0.512-1.024l-2.304-5.376c-3.328-7.168-7.424-13.696-11.904-20.352l-2.816-3.584v-0.256l-4.608 1.536c-7.424 2.56-14.72 4.352-22.4 5.888-7.424 1.024-15.232 1.792-23.168 1.792-22.656 0-43.392-4.864-62.208-14.464l-2.816-1.536-2.816 1.664c-0.768 0.512-1.536 0.768-2.56 1.28-2.304 1.024-4.608 2.048-6.912 2.816-2.304 1.28-4.608 2.048-7.168 2.816-14.464 5.12-29.952 7.68-46.208 7.68-17.28 0-34.048-3.072-49.792-8.832l-4.352-1.792h-0.256l-2.816 3.84c-2.56 3.328-4.608 6.912-6.656 10.112-1.28 2.048-2.56 4.096-3.584 6.144-0.512 1.024-1.024 2.048-1.28 2.816-1.536 2.56-2.816 5.376-3.84 8.064-2.56 5.632-4.608 11.648-5.888 17.536-0.768 2.048-1.024 3.84-1.536 5.888v0.768l-1.536 6.4v0.512h287.872l-1.024-7.936z m-270.592-4.992c0.512-1.536 1.024-3.328 1.536-4.864 0.512-2.048 1.28-4.096 2.304-6.144 1.792-5.12 4.352-10.112 7.168-14.976 1.536-2.816 3.328-5.376 5.12-8.064 15.744 5.376 32.512 8.064 49.536 8.064 20.864 0 40.32-3.84 58.368-11.648 2.304-0.512 4.864-1.792 7.168-2.816 7.424 3.584 14.976 6.4 22.912 8.32v0.256c13.44 3.84 27.648 5.888 42.368 5.888 4.352 0 8.32-0.256 12.672-0.512 11.136-1.024 22.144-3.072 32.512-6.144 6.144 9.344 11.136 19.584 14.208 30.464 0.256 0.768 0.512 1.28 0.768 2.048H620.672z"
                fill="#EEEAE5" p-id="30229"></path>
              <path
                d="M698.752 763.136c4.096-6.144 6.4-11.264 6.784-15.872 0.512-4.608-0.128-8.704-1.92-12.16-1.792-3.328-4.096-6.016-6.784-7.68-2.688-1.664-5.376-2.688-7.808-3.2-2.432-0.512-5.248-0.512-8.064-0.256-5.248 0.256-9.984 2.048-13.824 5.248-3.84 3.072-6.912 7.936-9.344 14.464l-1.28 3.584 14.208 2.176 0.896-2.432c1.152-3.072 2.688-5.248 4.736-6.784 2.048-1.536 4.224-2.304 6.528-2.56 1.92-0.128 3.584 0.256 5.12 1.408 1.536 1.28 2.432 2.688 2.688 4.48 0.256 2.048-0.256 4.608-1.536 7.68-1.536 3.328-4.864 8.32-10.112 14.72-5.248 6.528-9.728 11.264-13.056 14.336-4.096 3.712-6.4 7.936-6.784 12.672v4.864h47.36V784.64h-25.344c8.448-9.472 14.208-16.64 17.536-21.504zM771.2 763.904c-1.28-1.792-3.072-3.584-5.376-4.864 2.816-2.304 4.608-5.12 5.632-8.32 1.536-4.864 1.536-9.088 0.256-12.928-1.28-3.584-3.584-6.656-6.656-8.576-2.816-2.048-5.376-3.328-7.808-3.84-4.864-1.28-11.392-1.28-16.512 0-2.816 1.024-5.632 2.56-7.808 4.608-2.048 2.304-3.84 4.608-4.864 6.912-1.28 2.56-1.792 5.632-1.536 8.832 0.256 3.328 0.768 6.4 2.048 8.832 1.024 1.536 2.048 3.072 3.84 4.608-2.304 1.792-4.096 3.584-5.376 5.888-1.792 3.584-2.816 7.168-2.816 10.624 0 3.584 0.512 6.656 1.28 9.344 0.768 3.072 2.304 5.632 4.608 7.808 2.304 2.048 5.12 3.84 8.32 4.864 3.328 1.024 6.912 1.536 11.136 1.536 4.608 0 8.064-0.512 10.88-1.536 3.072-1.024 5.632-2.56 7.424-4.608 1.792-1.792 3.328-4.096 4.608-6.656 1.536-2.816 2.304-6.4 2.304-10.88s-1.28-8.32-3.584-11.648zM742.272 739.84c1.024-1.28 3.072-2.048 6.144-2.048 0.512 0 0.768-0.256 1.28-0.256 2.56 0 4.608 0.512 5.888 1.536 1.024 0.768 2.304 1.792 2.304 4.864 0.256 2.56-0.512 4.608-2.048 6.4-1.28 1.536-3.584 2.304-6.656 2.304-3.072 0-5.12-0.768-6.4-2.304-1.536-1.792-2.304-3.584-2.304-5.632 0-1.92 0.512-3.328 1.792-4.864z m16.512 41.088c-1.024 2.048-2.56 3.328-5.12 3.84-3.072 0.768-6.144 0.768-8.832 0.256-2.816-0.768-3.84-2.048-4.352-2.816-1.024-2.048-1.536-4.352-1.28-6.912 0-2.304 0.768-4.096 2.56-5.632 1.792-1.536 4.096-2.56 6.912-2.816h0.768c2.56 0 4.864 0.768 6.912 2.048 2.304 1.536 3.328 3.328 3.584 5.12 0.384 2.304-0.128 4.608-1.152 6.912zM840.704 746.368c-1.28-6.144-3.84-11.392-7.808-15.744-4.096-4.608-9.088-6.656-14.72-6.656s-10.112 1.536-13.952 4.608c-3.84 2.816-6.656 6.656-8.576 11.136-1.792 4.352-2.816 10.112-3.328 17.536-0.256 7.168 0.256 12.928 1.024 17.28 0.768 4.352 2.304 8.32 4.352 12.416 2.304 4.096 6.144 7.68 11.136 10.112 3.072 1.28 6.144 2.048 9.088 2.048 2.56 0 4.864-0.512 7.424-1.536 5.376-2.048 9.344-5.888 12.16-11.136 2.304-5.12 3.84-11.648 4.352-19.584 0.128-7.552-0.128-14.336-1.152-20.48z m-15.488 31.488c-1.28 3.584-3.072 5.888-5.376 6.912-1.536 0.768-3.584 1.024-6.4-1.024-2.56-1.792-4.352-5.376-5.376-10.112-1.28-5.12-1.536-11.392-0.768-18.048 0.768-6.656 2.048-11.392 4.352-14.464 1.792-2.304 3.84-3.584 6.144-3.584h0.256c1.28 0 3.328 0.512 5.376 3.84 1.792 2.816 2.816 6.4 3.328 9.856 0.256 4.096 0.512 8.576 0.512 13.696 0 4.608-0.768 9.088-2.048 12.928zM314.624 491.392l-60.032 164.352c-1.664 4.48 3.84 8.192 7.68 5.248l54.016-41.6c1.792-1.408 4.48-1.408 6.272 0.128l49.792 40.96c3.712 3.072 9.344-0.512 7.808-4.992l-56.192-163.84c-1.536-4.48-7.808-4.48-9.344-0.256z"
                fill="#FFFFFF" p-id="30230"></path>
              <path
                d="M756.224 880.256c-2.432 0.128-4.864 0.384-7.424 0.384-73.6 0-135.552-49.152-155.136-116.352l-152.32-107.904-0.128-0.128c-7.68 13.184-17.408 25.088-28.8 35.2v272.128h352.64c29.952 0 58.368-6.656 84.096-18.048l-92.16-65.28h-0.768zM219.904 59.392c-61.696 13.952-112.64 55.808-139.392 111.744L219.904 270.08V59.392z"
                fill="#DFDCD6" p-id="30231"></path>
              <path
                d="M170.624 584.064c0-35.84 13.056-68.608 34.56-93.952l-144.64-102.656v371.968c0 97.536 68.352 179.2 159.488 199.808v-266.24c-30.208-26.624-49.408-65.536-49.408-108.928z"
                fill="#FFC9D1" p-id="30232"></path>
            </svg>
            <p>暂无标记点，点击地图或使用搜索功能添加位置</p>
          </div>
        </div>

        <div v-if="directions" class="directions-panel">
          <h3>路线信息</h3>
          <div class="route-details">
            <div class="route-item">
              <svg t="1749432429759" class="icon" viewBox="0 0 1024 1024" version="1.1"
                xmlns="http://www.w3.org/2000/svg" p-id="40555" width="256" height="256">
                <path
                  d="M512 51.2C257.518933 51.2 51.2 257.501867 51.2 512s206.301867 460.8 460.8 460.8 460.8-206.301867 460.8-460.8S766.498133 51.2 512 51.2z"
                  fill="#03AA00" p-id="40556"></path>
                <path
                  d="M454.4 294.638933c-10.1888 0-19.968 4.078933-27.153067 11.3152-7.202133 7.253333-11.264 17.066667-11.264 27.323734v251.170133a38.519467 38.519467 0 0 0 38.4 38.656h115.2a38.519467 38.519467 0 0 0 38.4-38.656V333.277867a38.519467 38.519467 0 0 0-38.4-38.638934h-115.2z m0-38.638933h115.2c42.410667 0 76.8 34.594133 76.8 77.277867v251.170133a77.533867 77.533867 0 0 1-22.493867 54.647467 76.561067 76.561067 0 0 1-54.306133 22.647466h-115.2c-42.410667 0-76.8-34.6112-76.8-77.294933V333.277867c0-42.666667 34.389333-77.277867 76.8-77.277867z m-67.191467 396.0832c7.6288 0 14.9504 3.054933 20.360534 8.482133 5.393067 5.4272 8.430933 12.8 8.430933 20.48v57.975467c0 16.008533-12.885333 28.9792-28.791467 28.9792-15.9232 0-28.808533-12.970667-28.808533-28.9792v-57.9584c0-7.68 3.037867-15.069867 8.430933-20.48a28.706133 28.706133 0 0 1 20.3776-8.4992z m249.582934 0c15.906133 0 28.808533 12.970667 28.808533 28.9792v57.9584C665.6 755.029333 652.6976 768 636.791467 768c-15.906133 0-28.791467-12.970667-28.791467-28.9792v-57.9584c0-7.68 3.037867-15.069867 8.430933-20.48a28.706133 28.706133 0 0 1 20.360534-8.4992z"
                  fill="#FFFFFF" p-id="40557"></path>
                <path
                  d="M656.6912 375.466667H367.3088C324.676267 375.466667 290.133333 408.507733 290.133333 449.262933v193.7408a72.192 72.192 0 0 0 22.596267 52.1728A79.0016 79.0016 0 0 0 367.3088 716.8h289.3824c20.48 0 40.106667-7.7824 54.5792-21.623467A72.209067 72.209067 0 0 0 733.866667 643.003733V449.262933C733.866667 408.507733 699.323733 375.466667 656.6912 375.466667z m-83.797333 228.881066H460.629333a25.873067 25.873067 0 0 1-1.467733-0.068266h-0.1024a16.861867 16.861867 0 0 1-7.4752-2.56l-0.0512-0.017067a14.165333 14.165333 0 0 1-0.546133-0.375467l-0.119467-0.085333-0.477867-0.341333-0.170666-0.136534a16.298667 16.298667 0 0 1-0.4608-0.375466l-0.1536-0.119467a16.878933 16.878933 0 0 1-1.1264-1.092267l-0.136534-0.1536-0.4096-0.443733-0.1024-0.136533a17.527467 17.527467 0 0 1-0.392533-0.477867l-0.068267-0.085333A16.128 16.128 0 0 1 446.976 597.333333l-0.034133-0.034133a15.240533 15.240533 0 0 1-2.730667-7.936v-0.170667a12.629333 12.629333 0 0 1-0.017067-0.6144V481.28c0-4.181333 1.7408-8.192 4.829867-11.1616a16.896 16.896 0 0 1 11.6736-4.608c9.1136 0 16.4864 7.048533 16.4864 15.7696v91.511467h95.709867c9.1136 0 16.503467 7.0656 16.503466 15.786666 0 8.704-7.389867 15.7696-16.503466 15.7696z"
                  fill="#FFFFFF" p-id="40558"></path>
                <path
                  d="M656.6912 375.466667H367.3088C324.676267 375.466667 290.133333 408.507733 290.133333 449.262933v193.7408a72.192 72.192 0 0 0 22.596267 52.1728A79.0016 79.0016 0 0 0 367.3088 716.8h289.3824c20.48 0 40.106667-7.7824 54.5792-21.623467A72.209067 72.209067 0 0 0 733.866667 643.003733V449.262933C733.866667 408.507733 699.323733 375.466667 656.6912 375.466667z m-83.797333 228.881066H460.629333a25.873067 25.873067 0 0 1-1.467733-0.068266h-0.1024a16.861867 16.861867 0 0 1-7.4752-2.56l-0.0512-0.017067a14.165333 14.165333 0 0 1-0.546133-0.375467l-0.119467-0.085333-0.477867-0.341333-0.170666-0.136534a16.298667 16.298667 0 0 1-0.4608-0.375466l-0.1536-0.119467a16.878933 16.878933 0 0 1-1.1264-1.092267l-0.136534-0.1536-0.4096-0.443733-0.1024-0.136533a17.527467 17.527467 0 0 1-0.392533-0.477867l-0.068267-0.085333A16.128 16.128 0 0 1 446.976 597.333333l-0.034133-0.034133a15.240533 15.240533 0 0 1-2.730667-7.936v-0.170667a12.629333 12.629333 0 0 1-0.017067-0.6144V481.28c0-4.181333 1.7408-8.192 4.829867-11.1616a16.896 16.896 0 0 1 11.6736-4.608c9.1136 0 16.4864 7.048533 16.4864 15.7696v91.511467h95.709867c9.1136 0 16.503467 7.0656 16.503466 15.786666 0 8.704-7.389867 15.7696-16.503466 15.7696z"
                  fill="#FFFFFF" p-id="40559"></path>
              </svg>
              <span class="route-label">交通方式:</span>
              <span class="route-value">{{ directions.mode }}</span>
            </div>
            <div class="route-item">
              <svg t="1749432498896" class="icon" viewBox="0 0 1024 1024" version="1.1"
                xmlns="http://www.w3.org/2000/svg" p-id="43245" width="256" height="256">
                <path
                  d="M0 512c0 282.7776 229.2224 512 512 512 282.7776 0 512-229.2224 512-512C1024 229.2224 794.7776 0 512 0 229.2224 0 0 229.2224 0 512z"
                  fill="#4296FA" p-id="43246"></path>
                <path
                  d="M599.8592 382.344533l-134.929067-134.280533-134.946133 134.280533h86.391467v408.1152h97.109333V382.344533z"
                  fill="#9DCCFF" p-id="43247"></path>
                <path
                  d="M809.301333 507.869867l-134.4512-134.929067v83.5584c-143.547733 3.328-258.184533 120.661333-258.1504 264.260267v69.376h97.109334v-69.376a167.645867 167.645867 0 0 1 161.041066-167.133867v88.849067l134.434134-134.6048z"
                  fill="#FFFFFF" p-id="43248"></path>
              </svg>
              <span class="route-label">距离:</span>
              <span class="route-value">{{ directions.distance }}</span>
            </div>
            <div class="route-item">
              <svg t="1749432539360" class="icon" viewBox="0 0 1024 1024" version="1.1"
                xmlns="http://www.w3.org/2000/svg" p-id="45530" width="256" height="256">
                <path
                  d="M675.0208 52.0192h-322.56c-165.888 0-299.52 133.632-299.52 299.52v322.56c0 165.888 133.632 299.52 299.52 299.52h322.56c165.888 0 299.52-133.632 299.52-299.52v-322.56c0-165.888-133.632-299.52-299.52-299.52z m56.832 678.912c-119.808 119.808-316.416 119.808-436.224 0s-119.808-316.416 0-436.224 316.416-119.808 436.224 0c121.344 119.808 121.344 316.416 0 436.224z"
                  fill="#409EFF" p-id="45531"></path>
                <path
                  d="M328.704 327.168C225.792 430.08 225.792 595.968 328.704 697.344c102.912 102.912 268.8 102.912 370.176 0 102.912-102.912 102.912-268.8 0-370.176-101.376-101.376-267.264-101.376-370.176 0z m308.736 227.328h-138.24c-7.68 0-13.824-3.072-19.968-7.68-7.68-6.144-12.288-15.36-12.288-24.576V387.072c0-16.896 7.68-30.72 24.576-30.72s21.504 13.824 21.504 30.72v121.344h124.416c16.896 0 30.72 4.608 30.72 21.504s-13.824 24.576-30.72 24.576z"
                  fill="#409EFF" p-id="45532"></path>
              </svg>
              <span class="route-label">时间:</span>
              <span class="route-value">{{ directions.duration }}</span>
            </div>
          </div>
          <button @click="clearDirections" class="clear-route-btn">
            <svg t="1749430761140" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
              p-id="7651" width="256" height="256">
              <path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#F5222D" p-id="7652"></path>
              <path
                d="M471.338667 666.709333V423.594667a25.642667 25.642667 0 0 0-51.285334 0v243.114666a25.642667 25.642667 0 0 0 51.285334 0z m239.658666-268.16a25.642667 25.642667 0 0 0-25.6 25.6v330.965334c0 10.24-8.362667 18.56-18.602666 18.56H357.333333a18.56 18.56 0 0 1-18.56-18.56V423.253333a25.685333 25.685333 0 0 0-51.285333 0v331.861334c0 38.528 31.317333 69.845333 69.845333 69.845333h309.461334c38.528 0 69.845333-31.317333 69.845333-69.845333V424.149333c0-14.122667-11.52-25.6-25.6-25.6z m-107.050666 268.16V423.594667a25.642667 25.642667 0 0 0-51.285334 0v243.114666a25.642667 25.642667 0 0 0 51.285334 0z m195.413333-357.12h-106.965333v-40.704c0-38.528-31.146667-69.845333-69.376-69.845333H401.493333c-38.528 0-69.845333 31.317333-69.845333 69.845333v40.661334H224.682667a25.642667 25.642667 0 0 0 0 51.285333h574.677333a25.685333 25.685333 0 0 0 0-51.285333z m-158.293333 0h-258.133334v-40.704c0-10.24 8.32-18.602667 18.56-18.602666h221.525334c10.112 0 18.048 8.149333 18.048 18.602666v40.661334z"
                fill="#FFFFFF" p-id="7653"></path>
            </svg>
            清除路线
          </button>
        </div>
      </div>
    </div>

    <div v-if="showTransportModal" class="transport-modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>选择交通方式</h3>
          <button @click="closeModal" class="close-btn">×</button>
        </div>

        <div class="transport-options">
          <button v-for="option in transportOptions" :key="option.value" @click="selectTransport(option.value)"
            class="transport-option">
            <div class="travel-icon" v-html="option.icon"></div>
            <span>{{ option.label }}</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted, reactive } from 'vue';
import { useRoute, useRouter } from 'vue-router';
import MapComponent from './MapComponent.vue';
import CloseButton from '@/components/PromptComponent/CloseButton.vue'

// 定义响应式数据
const mapCenter = ref({ lat: 39.9042, lng: 116.4074 }); // 北京中心点
const mapZoom = ref(12);
const searchQuery = ref('');
const markers = ref([]);
const directions = ref(null);
const showTransportModal = ref(false);
const mapComponent = ref(null);
const reject = ref(false);

const car = `
  <svg t="1749433106933" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="47493" width="256" height="256"><path d="M377.856269 134.736842h556.247579a17.408 17.408 0 1 1 0 34.842947H895.191848v81.246316H416.795217V169.579789h-38.938948a17.408 17.408 0 1 1 0-34.842947zM673.415006 216.010105h186.906948V169.579789H673.415006v46.430316z m-221.776842 0h186.933895V169.579789H451.638164v46.430316z" fill="#596176" p-id="47494"></path><path d="M951.511848 152.144842c0 9.620211-7.787789 17.434947-17.408 17.434947H895.191848v81.246316H545.145533V216.010105h93.453473V169.579789h-93.480421V134.736842h389.012211c9.620211 0.026947 17.408 7.814737 17.434947 17.408z m-91.189894 17.434947H673.415006v46.430316h186.906948V169.579789z" fill="#596176" p-id="47495"></path><path d="M129.859638 445.170526H223.393954a26.138947 26.138947 0 0 0 25.923368-22.797473l4.796632-37.187369a164.001684 164.001684 0 0 1 162.654315-143.063579h487.747369c24.064 0 43.546947 19.509895 43.546947 43.546948v419.570526c0 24.037053-19.482947 43.546947-43.546947 43.546947H43.574164A43.546947 43.546947 0 0 1 0.000269 705.212632v-130.236632a129.832421 129.832421 0 0 1 129.859369-129.859368z" fill="#EF366F" p-id="47496"></path><path d="M545.091638 242.122105h359.477895c24.037053 0 43.52 19.509895 43.52 43.546948v419.570526c0 24.037053-19.482947 43.546947-43.546948 43.546947H545.091638V242.122105z" fill="#DC0044" p-id="47497"></path><path d="M834.856691 329.216h-169.229474c-17.434947 0-26.138947 8.730947-26.138948 26.138947v81.300211c0 17.434947 8.704 26.138947 26.138948 26.138947h169.229474c17.434947 0 26.138947-8.704 26.138947-26.138947v-81.300211c0-17.408-8.704-26.138947-26.138947-26.138947zM408.791848 329.216h137.377685a26.138947 26.138947 0 0 1 26.138947 26.138947v81.300211a26.138947 26.138947 0 0 1-26.138947 26.138947h-186.394948a26.138947 26.138947 0 0 1-25.788631-30.369684c2.425263-14.901895 4.742737-29.830737 6.979368-44.759579a68.581053 68.581053 0 0 1 67.853474-58.448842zM88.522375 555.142737H14.659638c-8.084211 0-14.659368 6.575158-14.659369 14.659368v46.026106h88.495158c15.925895 0 28.833684-12.934737 28.833685-28.833685v-2.991158c0-15.925895-12.907789-28.833684-28.833685-28.833684z" fill="#7ECAFF" p-id="47498"></path><path d="M997.861322 335.872h-50.391579V655.090526h50.391579a26.138947 26.138947 0 0 0 26.138947-26.138947v-266.913684a26.138947 26.138947 0 0 0-26.138947-26.138948z" fill="#EF366F" p-id="47499"></path><path d="M844.935006 747.061895a142.174316 142.174316 0 1 1-284.348631 0 142.174316 142.174316 0 0 1 284.348631 0z" fill="#18264D" p-id="47500"></path><path d="M702.760691 797.642105a50.526316 50.526316 0 1 0-0.10779-101.052631 50.526316 50.526316 0 0 0 0.10779 101.052631z" fill="#8A909F" p-id="47501"></path><path d="M389.928691 747.061895a142.201263 142.201263 0 1 1-284.375579 0 142.201263 142.201263 0 0 1 284.375579 0z" fill="#18264D" p-id="47502"></path><path d="M247.727427 797.642105a50.526316 50.526316 0 1 0 0-101.052631 50.526316 50.526316 0 0 0 0 101.052631z" fill="#8A909F" p-id="47503"></path><path d="M545.091638 329.216h1.077895a26.138947 26.138947 0 0 1 26.138947 26.138947v81.300211a26.138947 26.138947 0 0 1-26.138947 26.138947h-1.077895v-133.578105z" fill="#7ECAFF" p-id="47504"></path></svg>
  `;
const walk = `
<svg t="1749435123736" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="51840" width="256" height="256"><path d="M1024 512A512 512 0 1 1 0 512a512 512 0 0 1 1024 0" fill="#657D32" p-id="51841"></path><path d="M440.32 236.608c0-48.32 38.656-86.976 86.976-86.976s86.976 38.656 86.976 86.976-38.656 86.976-86.976 86.976c-48.384 4.864-86.976-38.656-86.976-86.976m19.264 198.08l-53.12 33.792v53.12a32.96 32.96 0 0 1-33.792 33.792 33.024 33.024 0 0 1-33.792-33.792V434.688l149.76-101.44 67.648 9.664s48.32 28.992 48.32 86.976v106.304c0 48.32 72.448 91.776 86.976 140.096 14.464 48.32 33.792 86.976 33.792 125.632 0 33.792-4.864 72.448-33.792 72.448-28.992 0-48.32-38.656-53.12-72.448-4.8-28.992-24.128-77.312-33.792-86.976-9.664-14.464-140.096-140.096-140.096-140.096l-4.992-140.16z m0 0" fill="#FFFFFF" p-id="51842"></path><path d="M305.024 801.856L440.32 632.768l72.448 53.12-135.296 169.152a45.824 45.824 0 0 1-62.784 9.664c-19.328-14.528-19.328-43.52-9.664-62.848m352.64-275.392l-24.128-24.128V381.568l82.112 91.776c14.464 14.464 9.664 38.656 0 53.12-14.464 19.328-38.656 19.328-57.984 0" fill="#FFFFFF" p-id="51843"></path></svg>
`;
const riding = `
<svg t="1749435210039" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="56997" width="256" height="256"><path d="M386.752 570.752a192.64 192.64 0 0 0-140.8-58.24 192.64 192.64 0 0 0-140.8 58.24 192.64 192.64 0 0 0-58.24 140.8c0 54.784 19.584 102.144 58.24 140.8a192.64 192.64 0 0 0 140.8 58.24 192.64 192.64 0 0 0 140.8-58.24 192.64 192.64 0 0 0 58.24-140.8 192.64 192.64 0 0 0-58.24-140.8z m-35.776 140.8c0 29.44-10.048 53.76-30.592 74.368a100.48 100.48 0 0 1-74.432 30.656c-29.44 0-53.76-10.048-74.368-30.656a100.48 100.48 0 0 1-30.656-74.368c0-29.44 10.048-53.76 30.656-74.432a100.48 100.48 0 0 1 74.368-30.592c29.44 0 53.76 9.984 74.432 30.592 20.608 20.608 30.592 44.928 30.592 74.432zM557.632 385.92l24 24.064c26.048 26.048 56.32 46.464 89.792 60.8a269.824 269.824 0 0 0 106.624 21.632h8.96V398.464h-8.96c-23.936 0-47.04-4.864-68.544-14.4a192.448 192.448 0 0 1-58.112-39.936L579.2 271.872a84.16 84.16 0 0 0-29.248-19.136 94.08 94.08 0 0 0-34.112-6.272 94.08 94.08 0 0 0-34.176 6.272 83.968 83.968 0 0 0-29.248 19.2L346.048 378.24c-7.68 7.68-13.952 16.768-18.56 26.88a79.36 79.36 0 0 0-6.912 32.64c0 11.328 2.176 22.208 6.4 32.448 4.288 10.368 10.752 19.648 19.328 27.456L465.024 601.6v194.944h93.952V548.288L478.976 464.64 557.632 385.92z m87.424-102.528c23.232 0 43.456-8.384 60.032-24.96 16.576-16.576 24.96-36.736 24.96-60.032s-8.384-43.52-24.96-60.032a82.176 82.176 0 0 0-60.032-24.96c-23.296 0-43.52 8.32-60.096 24.96-16.512 16.512-24.96 36.736-24.96 60.032s8.448 43.52 24.96 60.032c16.64 16.576 36.8 24.96 60.096 24.96z m273.792 287.296a192.64 192.64 0 0 0-140.8-58.24 192.64 192.64 0 0 0-140.8 58.24 192.64 192.64 0 0 0-58.24 140.8c0 54.784 19.584 102.144 58.24 140.8a192.64 192.64 0 0 0 140.8 58.24 192.64 192.64 0 0 0 140.8-58.24 192.64 192.64 0 0 0 58.24-140.8 192.64 192.64 0 0 0-58.24-140.8z m-35.84 140.8c0 29.44-9.984 53.76-30.592 74.368a100.48 100.48 0 0 1-74.368 30.656c-29.44 0-53.76-10.048-74.368-30.656a100.48 100.48 0 0 1-30.656-74.368c0-29.44 10.048-53.76 30.656-74.432a100.48 100.48 0 0 1 74.368-30.592c29.44 0 53.76 9.984 74.368 30.592 20.608 20.608 30.656 44.928 30.656 74.432z" fill="#C2BDBC" p-id="56998"></path></svg>
`;
const publictransport = `
<svg t="1749435286846" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="58146" width="256" height="256"><path d="M775.201477 217.049926h-101.703394a31.007132 31.007132 0 0 0-26.666134 15.503566A31.007132 31.007132 0 0 1 620.165816 248.057058h-217.049926a31.007132 31.007132 0 0 1-26.666134-15.503566 31.007132 31.007132 0 0 0-26.666133-15.503566H248.080229a124.028529 124.028529 0 0 0-124.028529 124.028529v279.06419a31.007132 31.007132 0 0 0 31.007132 31.007132h713.164042a31.007132 31.007132 0 0 0 31.007132-31.007132v-279.06419a124.028529 124.028529 0 0 0-124.028529-124.028529zM155.058832 775.178306v46.510699a62.014264 62.014264 0 0 0 62.014265 62.014264h589.135512a62.014264 62.014264 0 0 0 62.014265-62.014264V775.178306z" fill="#FFC824" p-id="58147"></path><path d="M961.24427 372.085587a31.007132 31.007132 0 0 1-31.007132-31.007132V248.057058a31.007132 31.007132 0 0 1 62.014265 0v93.021397a31.007132 31.007132 0 0 1-31.007133 31.007132zM62.037435 372.085587a31.007132 31.007132 0 0 1-31.007132-31.007132V248.057058a31.007132 31.007132 0 0 1 62.014265 0v93.021397a31.007132 31.007132 0 0 1-31.007133 31.007132zM806.208609 62.014264h-31.007132a31.007132 31.007132 0 0 0 0 62.014265h31.007132a31.007132 31.007132 0 0 1 31.007132 31.007132v434.099852h-250.847699l122.478172-122.478173a31.007132 31.007132 0 1 0-43.720057-43.720056L498.927929 589.135513H186.065964V155.035661a31.007132 31.007132 0 0 1 31.007133-31.007132h31.007132a31.007132 31.007132 0 0 0 0-62.014265H217.073097a93.021397 93.021397 0 0 0-93.021397 93.021397v666.653344a93.021397 93.021397 0 0 0 80.928615 93.021396 139.222024 139.222024 0 0 0 271.93255 0h69.455976a139.222024 139.222024 0 0 0 271.93255 0 93.021397 93.021397 0 0 0 80.928615-93.021396V155.035661a93.021397 93.021397 0 0 0-93.021397-93.021397zM341.101625 961.2211a77.827902 77.827902 0 0 1-71.006332-46.510699h142.012665A77.827902 77.827902 0 0 1 341.101625 961.2211z m341.078455 0a77.827902 77.827902 0 0 1-71.006333-46.510699h142.012666A77.827902 77.827902 0 0 1 682.18008 961.2211z m155.035661-139.532095a31.007132 31.007132 0 0 1-31.007132 31.007132H217.073097a31.007132 31.007132 0 0 1-31.007133-31.007132V651.149777h651.149777z" fill="#6B400D" p-id="58148"></path><path d="M589.158683 186.042793h-155.035661a93.021397 93.021397 0 0 1 0-186.042793h155.035661a93.021397 93.021397 0 0 1 0 186.042793z m-155.035661-124.028529a31.007132 31.007132 0 0 0 0 62.014265h155.035661a31.007132 31.007132 0 0 0 0-62.014265z" fill="#6B400D" p-id="58149"></path></svg>
`;
const subway = `
<svg t="1749435468545" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="59249" width="256" height="256"><path d="M430.376057 244.405701l153.865673 0c7.042474 0 12.919123-2.326595 17.819027-7.225487 4.897881-4.775536 7.285144-10.653196 7.285144-17.63298 0-7.470179-2.387262-13.592531-7.285144-18.369078-4.899904-4.775536-10.776553-7.225487-17.819027-7.225487L430.376057 193.952669c-7.10213 0-12.97979 2.448941-17.878683 7.225487-4.837214 4.775536-7.286155 10.898899-7.286155 18.369078 0 6.979784 2.448941 12.857444 7.286155 17.63298C417.396267 242.079107 423.273927 244.405701 430.376057 244.405701z" fill="#18CC73" p-id="59250"></path><path d="M304.001817 633.816602c-10.286158 0-18.919129 3.551065-25.960592 10.409515-6.979784 6.978773-10.531861 15.552088-10.531861 25.714889 0 9.552082 3.551065 17.878683 10.531861 24.859479 7.041463 6.856427 15.674434 10.407493 25.960592 10.407493 9.673417 0 18.061696-3.551065 25.103159-10.407493 6.979784-6.980796 10.531861-15.307396 10.531861-24.859479 0-10.162801-3.551065-18.735104-10.531861-25.714889C322.063513 637.367667 313.675234 633.816602 304.001817 633.816602z" fill="#18CC73" p-id="59251"></path><path d="M278.041225 294.122636l456.026739 0 0 150.620978-456.026739 0 0-150.620978Z" fill="#18CC73" p-id="59252"></path><path d="M745.457258 669.941005c0-10.162801-3.551065-18.735104-10.531861-25.714889-7.040452-6.85845-15.674434-10.409515-25.961603-10.409515-10.223468 0-18.85745 3.551065-25.897902 10.409515-7.042474 6.978773-10.531861 15.552088-10.531861 25.714889 0 9.552082 3.489387 17.878683 10.531861 24.859479 7.040452 6.856427 15.674434 10.407493 25.897902 10.407493 10.287169 0 18.921151-3.551065 25.961603-10.407493C741.906193 687.819688 745.457258 679.493088 745.457258 669.941005z" fill="#18CC73" p-id="59253"></path><path d="M506.4823 16.514678c-277.055885 0-501.579868 224.58465-501.579868 501.580879S229.426415 1019.677448 506.4823 1019.677448c277.057908 0 501.581891-224.585662 501.581891-501.581891S783.540207 16.514678 506.4823 16.514678zM715.455206 894.281975l-21.859476-48.861524L319.369881 845.420451l-21.858464 48.861524L192.994629 894.281975l106.965727-153.07093c-21.06271-5.878671-38.390331-17.63298-51.922195-35.266971-13.470185-17.635002-20.205278-37.962626-20.205278-60.860525l0-350.960913c0-13.837223 3.673411-27.062716 10.898899-39.675469 7.347833-12.490407 16.225496-24.001035 26.756346-34.41055s21.36807-19.347845 32.389314-26.94037c11.081912-7.470179 20.695673-12.97979 28.777581-16.776559 8.081909-3.673411 17.02125-7.714871 26.695679-12.001023 9.795763-4.286152 21.36807-7.959563 34.899933-11.265936 13.470185-3.184027 29.144619-5.87766 46.900956-7.959563 17.878683-2.204249 38.696702-3.184027 62.453044-3.184027 26.941382 0 50.696713 1.22447 71.268018 3.551065 20.512659 2.448941 38.45201 5.632968 53.881752 9.673417 15.368064 3.918103 28.899927 8.572304 40.472234 13.592531 11.570284 5.020227 22.28617 10.286158 32.022276 15.674434 9.672406 5.26593 19.959575 11.388282 30.736127 18.369078 10.836209 6.979784 20.572316 14.817001 29.142597 23.633997 8.695661 8.816996 15.79678 18.85745 21.492438 30.001041 5.693636 11.265936 8.509614 23.8797 8.509614 37.716923l0 350.960913c0 22.897899-6.856427 43.225523-20.632983 60.860525-13.776556 17.63298-31.164844 29.387289-52.226543 35.266971l107.700814 153.07093L715.455206 894.280964z" fill="#18CC73" p-id="59254"></path><path d="M365.53575 745.251494 342.085778 795.703516 670.145758 795.703516 647.430872 745.251494Z" fill="#18CC73" p-id="59255"></path></svg>
`;
const train = `
<svg t="1749435485800" class="icon" viewBox="0 0 1028 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="60452" width="256" height="256"><path d="M959.662327 500.874778c27.845025 19.373232 46.067372 51.598014 46.067372 88.138615 0 29.571353-11.988386 56.393369-31.393587 75.79857s-46.227217 31.425556-75.862508 31.425557H37.707471l-7.288939-3.069027V247.584153h690.339234l67.390715 71.450782-0.383628 0.351659h-178.227342v162.370704h288.936093c22.72998 0 43.82954 7.065156 61.188723 19.11748z m-432.892635-19.11748v-162.370704h-162.402673v162.370704h162.402673z m-245.106553 0v-162.370704h-162.402673v162.370704h162.402673z" fill="#5FCEFF" p-id="60453"></path><path d="M788.148481 319.034935l171.513846 181.839843a106.949193 106.949193 0 0 0-61.188723-19.11748h-288.936093v-162.370704h178.227342l0.383628-0.351659z" fill="#FFB578" p-id="60454"></path><path d="M364.367019 319.386594h162.402673v162.370704h-162.402673z" fill="#FF4893" p-id="60455"></path><path d="M119.260466 319.386594h162.402673v162.370704h-162.402673z" fill="#42BC90" p-id="60456"></path><path d="M898.473604 718.615841H37.707471a22.378321 22.378321 0 1 1 0-44.756642h860.766133c22.67883 0 44.002173-8.833043 60.037838-24.871905 16.019681-16.016484 24.843133-37.314252 24.843133-59.973901a85.047211 85.047211 0 0 0-36.470269-69.769211 84.494146 84.494146 0 0 0-48.410702-15.108563h-126.56539a22.378321 22.378321 0 1 1 0-44.756642h126.56539c26.598233 0 52.17026 7.992258 73.953957 23.113608a129.826231 129.826231 0 0 1 55.683656 106.520808c0 34.616066-13.478143 67.154144-37.950435 91.62324-24.491474 24.491474-57.051931 37.979208-91.687178 37.979208z" fill="#4F46A3" p-id="60457"></path><path d="M30.418532 715.546814a22.378321 22.378321 0 0 1-22.378321-22.378321V247.584153a22.378321 22.378321 0 0 1 22.378321-22.378321h690.339234a22.378321 22.378321 0 1 1 0 44.756642H52.796853v423.206019a22.378321 22.378321 0 0 1-22.378321 22.378321z" fill="#4F46A3" p-id="60458"></path><path d="M281.663139 504.135619h-162.402673a22.378321 22.378321 0 0 1-22.378321-22.378321v-162.370704a22.378321 22.378321 0 0 1 22.378321-22.378321h162.402673a22.378321 22.378321 0 0 1 22.378321 22.378321v162.370704a22.378321 22.378321 0 0 1-22.378321 22.378321z m-140.024352-44.756642h117.646031v-117.614062h-117.646031v117.614062zM526.769692 504.135619h-162.402673a22.378321 22.378321 0 0 1-22.378321-22.378321v-162.370704a22.378321 22.378321 0 0 1 22.378321-22.378321h162.402673a22.378321 22.378321 0 0 1 22.378321 22.378321v162.370704a22.378321 22.378321 0 0 1-22.378321 22.378321z m-140.024352-44.756642h117.646031v-117.614062h-117.646031v117.614062zM771.908214 504.135619h-162.370703a22.378321 22.378321 0 0 1-22.378321-22.378321v-162.370704a22.378321 22.378321 0 0 1 22.378321-22.378321h178.227342a22.378321 22.378321 0 1 1 0 44.756642h-155.849021v117.614062h139.992382a22.378321 22.378321 0 1 1 0 44.756642zM883.160438 798.282664H23.481253a22.378321 22.378321 0 1 1 0-44.756642h859.679185a22.378321 22.378321 0 1 1 0 44.756642z" fill="#4F46A3" p-id="60459"></path><path d="M961.871387 525.586838a22.314383 22.314383 0 0 1-16.272236-7.010809l-241.123212-255.637151a22.378321 22.378321 0 0 1 32.563654-30.706253l241.097637 255.611576a22.384715 22.384715 0 0 1-0.901527 31.636552 22.333564 22.333564 0 0 1-15.364316 6.106085z" fill="#4F46A3" p-id="60460"></path></svg>
`;

const transportOptions = reactive([
  { value: 'driving', label: '驾车', icon: car },
  { value: 'walking', label: '步行', icon: walk },
  { value: 'bicycling', label: '自行车', icon: riding },
  { value: 'transit', label: '公共交通', icon: publictransport },
  { value: 'subway', label: '地铁', icon: subway },
  { value: 'train', label: '火车', icon: train },

]);
// 获取路由对象
const route = useRoute();
const router = useRouter();

// 生命周期钩子
onMounted(() => {
  // 检查是否有传递过来的位置参数
  if (route.params.location) {
    searchQuery.value = route.params.location;
    handleSearch();
  }
});

// 方法
const handleBack = () => {
  router.push('/systemhomeView');
};

const handleSearch = async () => {
  if (!searchQuery.value.trim()) return;

  try {
    // 模拟搜索功能 - 在实际项目中，这里应该调用地图API的搜索功能
    console.log('搜索地点:', searchQuery.value);

    // 模拟返回的地点数据
    const mockPlace = {
      name: searchQuery.value,
      lat: 39.9042 + (Math.random() - 0.5) * 0.1,
      lng: 116.4074 + (Math.random() - 0.5) * 0.1
    };

    mapCenter.value = { lat: mockPlace.lat, lng: mockPlace.lng };
    mapZoom.value = 15;

    // 添加搜索结果到标记列表
    const newMarker = {
      ...mockPlace,
      name: searchQuery.value
    };
    markers.value.push(newMarker);
    mapComponent.value.addMarker(newMarker);

  } catch (error) {
    console.error('搜索地点失败:', error);
    alert('无法找到该地点，请尝试更详细的位置描述');
  }
};

const addMarker = () => {
  const randomLat = mapCenter.value.lat + (Math.random() - 0.5) * 0.1;
  const randomLng = mapCenter.value.lng + (Math.random() - 0.5) * 0.1;
  const marker = {
    lat: randomLat,
    lng: randomLng,
    name: `标记点 ${markers.value.length + 1}`
  };
  markers.value.push(marker);
  mapComponent.value.addMarker(marker);
};

const removeLastMarker = () => {
  if (markers.value.length > 0) {
    markers.value.pop();
    mapComponent.value.removeLastMarker();
    if (directions.value) {
      clearDirections();
    }
  }
};

const removeMarker = (index) => {
  markers.value.splice(index, 1);
  mapComponent.value.removeMarker(index);
  if (directions.value) {
    clearDirections();
  }
};

const resetMap = () => {
  mapCenter.value = { lat: 39.9042, lng: 116.4074 };
  mapZoom.value = 12;
  markers.value = [];
  mapComponent.value.resetMap();
  clearDirections();
};

const locateMe = async () => {
  try {
    // 调用高德地图API获取真实位置
    mapComponent.value.getCurrentPosition((status, result) => {
      if (status === 'complete') {
        console.log('定位成功', result);
        const position = {
          coords: {
            latitude: result.position.lat,
            longitude: result.position.lng
          }
        };
        const resolve = (position) => {
          mapCenter.value = {
            lat: position.coords.latitude,
            lng: position.coords.longitude
          };
          mapZoom.value = 15;

          // 添加当前位置到标记列表
          const newMarker = {
            lat: position.coords.latitude,
            lng: position.coords.longitude,
            name: '我的位置'
          };
          markers.value.push(newMarker);
          mapComponent.value.addMarker(newMarker);
        };
        resolve(position);
      } else {
        console.error('定位失败', result);
        reject(new Error('获取位置失败'));
        return;
      }
    });
  } catch (error) {
    console.error('获取位置失败:', error);
    alert('无法获取您的位置，请确保已授予位置权限');
  }
};

const centerMapOnMarker = (marker) => {
  mapCenter.value = { lat: marker.lat, lng: marker.lng };
  mapZoom.value = 15;
};

const selectTransport = (mode) => {
  showTransportModal.value = false;
  if (markers.value.length >= 2) {
    const start = markers.value[0];
    const end = markers.value[1];

    // 设置交通方式
    directions.value = {
      mode: mode === 'driving' ? '驾车' :
        mode === 'walking' ? '步行' :
          mode === 'bicycling' ? '自行车' : '公共交通',
      distance: `${Math.floor(Math.random() * 50)}公里`,
      duration: `${Math.floor(Math.random() * 60)}分钟`
    };

    // 这里应该调用地图API的路线规划功能
    console.log('规划路线从', start, '到', end, '使用', directions.value.mode);
    mapComponent.value.drawRoute(start, end, mode);
  }
};

const closeModal = () => {
  showTransportModal.value = false;
};

const clearDirections = () => {
  directions.value = null;
  mapComponent.value.clearDirections();
};

const handleMarkerClick = (marker) => {
  console.log('Marker clicked:', marker);
  // 可以在这里添加点击标记后的处理逻辑
};
</script>

<style scoped>
/* 基础样式 */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: Arial, sans-serif;
}

/* 应用容器 */
.map-application {
  display: flex;
  flex-direction: column;
  height: 100vh;
  background-color: #f8f9fa;
}

/* 头部样式 */
.map-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 2rem;
  background: linear-gradient(135deg, #4a6bdf, #3a56c7);
  color: #ffffff;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  z-index: 10;
}

.header-left h1 {
  font-size: 1.8rem;
  font-weight: 600;
  margin: 0;
}

/* 主要内容区域 */
.map-main-content {
  display: flex;
  flex: 1;
  overflow: hidden;
}

/* 地图容器 */
.map-wrapper {
  flex: 3;
  position: relative;
  padding: 1rem;
  background-color: #e9ecef;
}

.map-container {
  position: relative;
  height: 100%;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  background-color: #ffffff;
}

/* 地图按钮组 */
.map-buttons {
  position: absolute;
  bottom: 18.5rem;
  left: 20px;
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
  z-index: 100;
}

.map-btn {
  padding: 0.6rem 1rem;
  border: none;
  border-radius: 30px;
  background-color: #ffffff;
  color: #343a40;
  font-weight: 500;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  transition: all 0.3s ease;
}

.map-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.map-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.map-icon {
  width: 20px;
  height: 20px;
  overflow: hidden;
}

.add-marker {
  background-color: #28a745;
  color: #ffffff;
}

.remove-marker {
  background-color: #dc3545;
  color: #ffffff;
}

.reset-map {
  background-color: #ffc107;
  color: #343a40;
}

.locate-me {
  background-color: #17a2b8;
  color: #ffffff;
}

.route-planning {
  background-color: #4a6bdf;
  color: #ffffff;
}

/* 信息面板 */
.info-panel {
  flex: 1;
  display: flex;
  flex-direction: column;
  background-color: #ffffff;
  border-left: 1px solid #e9ecef;
  overflow-y: auto;
  padding: 1rem;
}

.search-panel {
  margin-bottom: 1.5rem;
}

.search-box {
  display: flex;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}

.search-box input {
  flex: 1;
  padding: 0.8rem 1rem;
  border: none;
  outline: none;
  font-size: 1rem;
  background-color: #f8f9fa;
}

.search-btn {
  padding: 0 1.2rem;
  border: none;
  background-color: #4a6bdf;
  color: #ffffff;
  cursor: pointer;
  transition: all 0.3s ease;
}

.search-btn:hover {
  background-color: #3a56c7;
}

.info-header {
  padding: 0.5rem 0;
  margin-bottom: 1rem;
  border-bottom: 1px solid #e9ecef;
}

.info-header h2 {
  font-size: 1.4rem;
  color: #343a40;
}

/* 标记点列表 */
.markers-list {
  flex: 1;
  overflow-y: auto;
  margin-bottom: 1rem;
}

.marker-item {
  display: flex;
  align-items: center;
  padding: 0.8rem 1rem;
  margin: 0.5rem;
  background-color: #f8f9fa;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
}

.marker-item:hover {
  background-color: #e2e6ea;
  transform: translateX(3px);
}

.marker-index {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  background-color: #4a6bdf;
  color: #ffffff;
  border-radius: 50%;
  font-size: 0.8rem;
  font-weight: bold;
  margin-right: 0.8rem;
}

.marker-name {
  flex: 1;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.marker-coords {
  font-size: 0.8rem;
  color: #6c757d;
  margin-left: 0.5rem;
  white-space: nowrap;
}

.marker-remove-btn {
  margin-left: 0.5rem;
  background: none;
  border: none;
  color: #dc3545;
  cursor: pointer;
  opacity: 0;
  transition: all 0.3s ease;
}

.marker-remove-btn .icon {
  width: 20px;
  height: 20px;
}

.marker-item:hover .marker-remove-btn {
  opacity: 1;
}

.no-markers {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 200px;
  color: #6c757d;
  text-align: center;
}

.no-markers {
  font-size: 2.5rem;
  margin-bottom: 1rem;
  opacity: 0.5;
}

/* 路线信息面板 */
.directions-panel {
  background-color: #f8f9fa;
  border-radius: 8px;
  padding: 1rem;
  margin-top: 1rem;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
}

.directions-panel h3 {
  font-size: 1.2rem;
  margin-bottom: 1rem;
  color: #343a40;
}

.route-details {
  margin-bottom: 1rem;
}

.route-item {
  display: flex;
  align-items: center;
  margin-bottom: 0.5rem;
  font-size: 0.95rem;
}

.route-item .icon {
  margin-right: 0.5rem;
  font-size: 1.1rem;
  width: 20px;
  height: 20px;
}

.route-label {
  font-weight: 500;
  margin-right: 0.5rem;
  color: #343a40;
}

.route-value {
  color: #6c757d;
}

.clear-route-btn {
  width: 100%;
  padding: 0.6rem;
  background-color: #dc3545;
  color: #ffffff;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.clear-route-btn .icon {
  width: 20px;
  height: 20px;
}

.clear-route-btn:hover {
  background-color: #c82333;
}

/* 交通方式模态框 */
.transport-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.modal-content {
  background-color: #ffffff;
  border-radius: 8px;
  width: 90%;
  max-width: 450px;
  overflow: hidden;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
  animation: modalFadeIn 0.3s ease;
}

@keyframes modalFadeIn {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1.2rem;
  background-color: #4a6bdf;
  color: #ffffff;
}

.modal-header h3 {
  margin: 0;
  font-size: 1.3rem;
}

.close-btn {
  background: none;
  border: none;
  color: #ffffff;
  font-size: 1.5rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.close-btn:hover {
  transform: scale(1.2);
}

.transport-options {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-around;
  flex-wrap: wrap;
  gap: 1rem;
  padding: 1.5rem;
}

.transport-option {
  width: 60px;
  height: 60px;
  margin: 20px;
  border: none;
  border-radius: 8px;
  background-color: #f8f9fa;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
}

.travel-icon {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.transport-option:hover {
  background-color: #e2e6ea;
  transform: translateY(-3px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.transport-option .icon {
  font-size: 1.8rem;
}

/* 响应式设计 */
@media (max-width: 768px) {
  .map-main-content {
    flex-direction: column;
  }

  .map-wrapper {
    height: 60vh;
  }

  .info-panel {
    border-left: none;
    border-top: 1px solid #e9ecef;
  }

  .map-buttons {
    flex-wrap: wrap;
    justify-content: center;
    width: 90%;
  }

  .map-btn {
    padding: 0.5rem 0.8rem;
    font-size: 0.9rem;
  }

  .transport-options {
    grid-template-columns: 1fr;
  }
}

/* 返回按钮 */
.header-right {
  position: fixed;
  top: 100px;
  left: 1rem;
  z-index: 1000;
}
</style>